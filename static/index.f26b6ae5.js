import{_ as he}from"./nuxt-link.843f9242.js";import{_ as _e}from"./client-only.29e349b5.js";import{_ as be,C as ge,s as xe,u as we,r as i,n as d,f as ye,q as ke,v as ve,o as l,x as R,D as Se,y as n,w as T,a as t,c,E as x,F as N,b as U,d as z,t as u,G as Ae,H as w,z as J,I as C,J as B,K as P,L as De,M as $e,N as Ee,B as Te,p as Ne,e as Ce,A as y}from"./entry.224e2291.js";import{u as Pe}from"./dayjs.72a44ffb.js";import{p as Le}from"./progressDone.bd6f4870.js";import{t as k}from"./twoAfterDecimal.45cad18c.js";import{o as L}from"./onError.7b82e965.js";import{u as Ie}from"./stock.543de022.js";const f=v=>(Ne("data-v-e9633a7b"),v=v(),Ce(),v),Me={class:"flex mx-auto my-4 p-6"},Ye=["onClick"],Oe=["src"],Ve={class:"flex items-center"},je={class:"font-[600]"},qe=f(()=>t("span",{class:"text-[12px]"},"USD",-1)),Ue={class:"py-10"},ze={class:"text-center font-bold text-2xl mb-[40px]"},Be={class:"flex flex-wrap justify-between w-[95%] mx-auto"},Ge={class:"flex items-center"},He=["src"],Fe={class:"text-[16px] font-bold"},We={class:"flex items-center"},Ke={class:"font-bold me-5"},Re=f(()=>t("span",{class:"font-normal text-[10px] ms-1"},"USD",-1)),Je={class:"flex w-[95%] mt-10 mx-auto mb-[100px]"},Xe={class:"w-[20%] h-[850px] p-5 border border-solid border-black rounded box-border mt-2"},Ze=f(()=>t("label",{for:"news",class:"font-bold text-[18px]"},"股票代號搜尋",-1)),Qe=["onKeydown"],et=f(()=>t("label",{class:"font-bold text-[18px]"},"新聞發佈時間",-1)),tt=f(()=>t("label",{for:"start",class:"block text-[14px] font-bold mt-1"},"從",-1)),ot=f(()=>t("label",{for:"end",class:"block text-[14px] font-bold"},"到",-1)),st=f(()=>t("label",{class:"font-bold text-[18px]"},"主題",-1)),nt=["value"],at={class:"font-bold text-[14px] m-2 py-2"},lt={key:0,class:"flex flex-wrap justify-around w-[80%]"},rt=["href"],ct=["src"],it={class:"py-1 text-ellipsis overflow-hidden"},ut={class:"text-xs"},dt={key:1,class:"w-[80%] text-center text-2xl mt-[200px]"},pt=f(()=>t("h3",null,"交叉比對無資料,請重新搜尋..",-1)),mt=[pt],ft={__name:"index",setup(v){const X=ge(),I=Pe(),Z=Ie(),{path:Q}=xe(Z),ee=we();Q.value=ee.name;const S=i(),G=d(()=>S.value?Object.entries(S.value["Time Series (1min)"]).map(([s,r])=>({date:s,...r})):void 0),M=i("AAPL"),H=i(),p=i(),A=i([]),te=d(()=>A.value.join(",")),oe=i({blockchain:"區塊鏈",earnings:"收益",ipo:"IPO",mergers_and_acquisitions:"併購",financial_markets:"金融市場",economy_fiscal:"財政政策（稅改、政府支出）",economy_monetary:"貨幣政策（利率、通貨膨脹）",economy_macro:"總體經濟",energy_transportation:"能源與運輸",finance:"金融",life_sciences:"生命科學",manufacturing:"製造業",real_estate:"房地產",retail_wholesale:"零售批發",technology:"科技"}),D=i(""),se=d(()=>D.value.split(" ").map(r=>`&tickers=${r}`).join(",")||""),h=i(""),_=i(""),ne=d(()=>(h.value=h.value?I(h.value).minute(0).hour(0).format("YYYYMMDD[T]HHmm"):"",h.value)),ae=d(()=>(_.value=_.value?I(_.value).minute(59).hour(23).format("YYYYMMDD[T]HHmm"):"",_.value));ye(()=>{p.value&&p.value.forEach(e=>{e.authors.reverse()})});const Y=i([]),F="SX2XVYCP8Z7I25DJ",$="3ec51f1b30948ec05697da301727451c",le=d(()=>`https://www.alphavantage.co/query?function=TIME_SERIES_INTRADAY&symbol=${M.value}&interval=1min&outputsize=full&apikey=${F}`),re=d(()=>`https://www.alphavantage.co/query?function=NEWS_SENTIMENT&topics=${te.value}${se.value}&time_from=${ne.value}&time_to=${ae.value}&apikey=${F}`),ce=`https://financialmodelingprep.com/api/v3/stock_market/gainers?apikey=${$}`,ie=`https://financialmodelingprep.com/api/v3/stock_market/losers?apikey=${$}`,ue=`https://financialmodelingprep.com/api/v3/stock_market/actives?apikey=${$}`,de=`https://financialmodelingprep.com/api/v3/quote-order/AAPL,GOOGL,META,TSLA?apikey=${$}`,O=()=>{const e=y.get(de),s=y.get(le.value),r=y.get(ce),m=y.get(ie),g=y.get(ue),j=y.get(re.value);return[e,s,r,m,g,j]},pe=(e="AAPL",s="Apple Inc.")=>{M.value=e,Promise.all(O()).then(r=>{H.value=r[0].data,S.value=r[1].data,E.value=s,r.forEach((m,g)=>{g>=2&&g<=4&&(m.data.length=5,Y.value.push(m))}),p.value=r[5].data.feed,p.value.length=20})};ke(()=>{pe()});const me=async(e,s)=>{M.value=e;const[,r]=O(),m=await r;S.value=m.data,E.value=s},b=d(()=>G.value?G.value.reverse().map(e=>[+I(e.date),parseFloat(e["2. high"])]):void 0),V=d(()=>b.value[0][1]>b.value[b.value.length-1][1]),E=i(""),fe=d(()=>({title:{useHTML:!0,text:`<span class='text-[21px]'>${E.value}</span>`},xAxis:{gapGridLineWidth:0},yAxis:{gridLineColor:"#ffffff"},navigator:{enabled:!1},rangeSelector:{buttonTheme:{fill:"none",stroke:"none",r:3,width:50,height:30,style:{color:"#284a6b",fontWeight:"bold",lineWidth:5,fontSize:"16px"},states:{hover:{},select:{fill:"#284a6b",style:{color:"white"}}}},buttons:[{type:"minute",count:5,text:"5分"},{type:"hour",count:1,text:"1小時"},{type:"day",count:1,text:"1天"},{type:"week",count:1,text:"1週"},{type:"all",count:1,text:"全部"}],buttonPosition:{align:"left",x:-15,y:-45},labelStyle:{color:"white"},selected:2,inputEnabled:!1},accessibility:{enabled:!1},stockTools:{gui:{enabled:!1}},series:[{name:`${E.value}`,type:"area",data:b.value,color:V.value?"#ff0000":"#56a556",lineWidth:2,gapSize:5,tooltip:{valueDecimals:2},showInLegend:!0,fillColor:{linearGradient:{x1:0,y1:0,x2:0,y2:1},stops:[[0,V.value?"#ff000044":"#56a55644"],[1,Ee.color(V.value?"#ff0000":"#56a556").setOpacity(0).get("rgba")]]},threshold:null}]})),W=(e,s)=>{if(e.includes("gainer"))return s==="color"?"":"當日上漲股票排名";if(e.includes("loser"))return s==="color"?"bg-[#ff0000]":"當日下跌股票排名";if(e.includes("active"))return s==="color"?"bg-zinc-700":"當日活躍股票排名"},K=async()=>{const[,,,,,e]=O(),s=await e;p.value=s.data.feed.length!==0?s.data.feed:void 0,p.value!==void 0&&(p.value.length=20)};return Le(b),(e,s)=>{const r=he,m=ve("highcharts"),g=_e,j=Te;return l(),R(j,{name:"header"},Se({_:2},[n(b)?{name:"main",fn:T(()=>[t("div",Me,[(l(!0),c(w,null,x(n(H),o=>(l(),c("button",{class:"flex items-center btn-primary shadows sticky w-[24%]",onClick:a=>me(o.symbol,o.name)},[t("img",{src:`https://financialmodelingprep.com/image-stock/${o.symbol.toUpperCase()}.png`,class:N(["inline-block w-[15%] h-[45px] aspect-square me-3",o.symbol=="AAPL"?"bg-black p-3 rounded-[50%]":""])},null,10,Oe),t("div",null,[U(r,{to:`/stocks/${o.symbol}`,class:"text-[24px] font-bold hover:text-[#4279af]",onClick:Ae(a=>n(X).push(`/stocks/${o.symbol}`),["self"])},{default:T(()=>[z(u(o.name),1)]),_:2},1032,["to","onClick"]),t("div",Ve,[t("p",je,[z(u(o.price),1),qe]),t("p",{class:N(["ms-3",o.changesPercentage>0?"text-[#56a556]":"text-[#ff0000]"])},u(o.changesPercentage>0?`+${("twoAfterDecimal"in e?e.twoAfterDecimal:n(k))(o.changesPercentage)}`:`${("twoAfterDecimal"in e?e.twoAfterDecimal:n(k))(o.changesPercentage)}`)+"% ",3)])])],8,Ye))),256))]),U(g,null,{default:T(()=>[n(b)?(l(),R(m,{key:0,class:"h-[600px] w-[90%] mx-auto my-10","constructor-type":"stockChart",options:n(fe)},null,8,["options"])):J("",!0)]),_:1}),n(Y)?(l(!0),c(w,{key:0},x(n(Y),o=>(l(),c("div",Ue,[t("h3",ze,u(W(o.config.url)),1),t("ul",Be,[(l(!0),c(w,null,x(o.data,a=>(l(),c("li",{key:a.name,class:"racebox"},[t("div",Ge,[t("img",{src:`https://financialmodelingprep.com/image-stock/${a.symbol}.png`,class:N(["inline-block w-[35px] h-[35px] aspect-square me-3",a.name=="AAPL"?"bg-black p-1 rounded-[50%]":""]),onError:s[0]||(s[0]=(...q)=>("onError"in e?e.onError:n(L))&&("onError"in e?e.onError:n(L))(...q))},null,42,He),U(r,{to:`/stocks/${a.symbol}`,class:"hover:text-[#4279af]"},{default:T(()=>[t("h4",Fe,u(a.name),1),t("p",null,u(a.symbol),1)]),_:2},1032,["to"])]),t("div",We,[t("p",Ke,[z(u(`${("twoAfterDecimal"in e?e.twoAfterDecimal:n(k))(a.price)}`),1),Re]),t("p",{class:N(["percent text-center",W(o.config.url,"color")])},u(a.changesPercentage<0?`${("twoAfterDecimal"in e?e.twoAfterDecimal:n(k))(a.changesPercentage)}%`:`+${("twoAfterDecimal"in e?e.twoAfterDecimal:n(k))(a.changesPercentage)}%`),3)])]))),128))])]))),256)):J("",!0),t("div",Je,[t("div",Xe,[Ze,C(t("input",{id:"news",type:"text",placeholder:"格式(代號 代號)",class:"w-[100%] mb-4 mt-1 p-1 bg-white border border-solid border-black rounded shadow :active:border-white text-[14px]","onUpdate:modelValue":s[1]||(s[1]=o=>P(D)?D.value=o:null),onKeydown:De(K,["native","enter"])},null,40,Qe),[[B,n(D)]]),t("div",null,[et,tt,C(t("input",{type:"date",id:"start","onUpdate:modelValue":s[2]||(s[2]=o=>P(h)?h.value=o:null),class:"text-[14px] w-[100%] mb-4 mt-1 p-1 bg-white border border-solid border-black rounded shadow"},null,512),[[B,n(h)]]),ot,C(t("input",{type:"date",id:"end","onUpdate:modelValue":s[3]||(s[3]=o=>P(_)?_.value=o:null),class:"text-[14px] w-[100%] mb-4 mt-1 p-1 bg-white border border-solid border-black rounded shadow"},null,512),[[B,n(_)]])]),st,(l(!0),c(w,null,x(n(oe),(o,a)=>(l(),c("div",{key:a,class:"mt-1"},[C(t("input",{type:"checkbox",value:a,"onUpdate:modelValue":s[4]||(s[4]=q=>P(A)?A.value=q:null)},null,8,nt),[[$e,n(A)]]),t("label",at,u(o),1)]))),128)),t("button",{onClick:K,class:"bg-[#4f46e5] py-1 px-2 mt-3 rounded text-white font-bold"}," 新聞篩選 ")]),n(p)!==void 0?(l(),c("div",lt,[(l(!0),c(w,null,x(n(p),o=>(l(),c("a",{href:o.url,key:o.overall_sentiment_score,class:"news"},[t("img",{src:o.banner_image?o.banner_image:"/FTNT.png",class:"w-[30%] aspect-square object-contain me-3",alt:"",onError:s[5]||(s[5]=(...a)=>("onError"in e?e.onError:n(L))&&("onError"in e?e.onError:n(L))(...a))},null,40,ct),t("div",null,[t("h3",it,u(o.title),1),(l(!0),c(w,null,x(o.authors,a=>(l(),c("p",ut,u(a),1))),256))])],8,rt))),128))])):(l(),c("div",dt,mt))])]),key:"0"}:void 0]),1024)}}},vt=be(ft,[["__scopeId","data-v-e9633a7b"]]);export{vt as default};
