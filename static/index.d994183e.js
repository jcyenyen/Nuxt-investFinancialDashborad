import{_ as _e}from"./nuxt-link.7a15a13a.js";import{_ as be}from"./client-only.08977553.js";import{_ as ve,C as ye,s as xe,u as ge,r as d,n as x,f as ke,q as we,v as Se,o as r,x as Z,D as Re,y as a,w as C,a as o,c as l,E as k,F as N,b as V,d as j,t as p,G as Ae,H as w,z as ee,I as L,J as z,K as M,L as De,M as Ee,N as Te,B as Ce,p as Ne,e as Le}from"./entry.ed2d6962.js";import{f as $,a as se,u as Me}from"./index.5ed31655.js";import{t as U}from"./twoAfterDecimal.45cad18c.js";import{p as Ie}from"./progressDone.7059aff8.js";import{o as I}from"./onError.478bc54f.js";import{u as $e}from"./navBar.3d8d6c73.js";const B="3ec51f1b30948ec05697da301727451c",ne="M7T0RMDQLR3LRQ77",Be=()=>$.get("/quote-order/AAPL,GOOGL,META,TSLA",{params:{apikey:B}}),Pe=t=>se.get("/query",{params:{function:"TIME_SERIES_INTRADAY",symbol:t,interval:"1min",outputsize:"full",apikey:ne}}),Ye=(t,u,f,S)=>se.get("/query",{params:{function:"NEWS_SENTIMENT",topics:t,tickers:u,time_from:f,time_to:S,apikey:ne}}),qe=()=>$.get("/stock_market/gainers",{params:{apikey:B}}),Ge=()=>$.get("/stock_market/losers",{params:{apikey:B}}),Oe=()=>$.get("/stock_market/actives",{params:{apikey:B}}),Ve=()=>{try{return Be().then(t=>t,t=>{console.error(t)})}catch(t){console.error(t)}},te=t=>{try{return Pe(t).then(u=>u,u=>{console.error(u)})}catch(u){console.error(u)}},oe=(t,u,f,S)=>{try{return Ye(t,u,f,S).then(h=>h,h=>{console.error(h)})}catch(h){console.error(h)}},je=()=>{try{return Ge().then(t=>t,t=>{console.error(t)})}catch(t){console.error(t)}},ze=()=>{try{return Oe().then(t=>t,t=>{console.error(t)})}catch(t){console.error(t)}},Ue=()=>{try{return qe().then(t=>t,t=>{console.error(t)})}catch(t){console.error(t)}};const m=t=>(Ne("data-v-d01e9d26"),t=t(),Le(),t),He={class:"flex mx-auto my-4 p-6"},Ke=["onClick"],Fe=["src"],We={class:"flex items-center"},Qe={class:"font-[600]"},Je=m(()=>o("span",{class:"text-[12px]"},"USD",-1)),Xe={class:"py-10"},Ze={class:"text-center font-bold text-2xl mb-[40px]"},et={class:"flex flex-wrap justify-between w-[95%] mx-auto"},tt={class:"flex items-center"},ot=["src"],st={class:"text-[16px] font-bold"},nt={class:"flex items-center"},at={class:"font-bold me-5"},rt=m(()=>o("span",{class:"font-normal text-[10px] ms-1"},"USD",-1)),lt={class:"flex w-[95%] mt-10 mx-auto mb-[100px]"},ct={class:"w-[20%] h-[850px] p-5 border border-solid border-black rounded box-border mt-2"},it=m(()=>o("label",{for:"news",class:"font-bold text-[18px]"},"股票代號搜尋",-1)),ut=["onKeydown"],dt=m(()=>o("label",{class:"font-bold text-[18px]"},"新聞發佈時間",-1)),pt=m(()=>o("label",{for:"start",class:"block text-[14px] font-bold mt-1"},"從",-1)),mt=m(()=>o("label",{for:"end",class:"block text-[14px] font-bold"},"到",-1)),ft=m(()=>o("label",{class:"font-bold text-[18px]"},"主題",-1)),ht=["value"],_t={class:"font-bold text-[14px] m-2 py-2"},bt={key:0,class:"flex flex-wrap justify-around w-[80%]"},vt=["href"],yt=["src"],xt={class:"py-1 text-ellipsis overflow-hidden"},gt={class:"text-xs"},kt={key:1,class:"w-[80%] text-center text-2xl mt-[200px]"},wt=m(()=>o("h3",null,"交叉比對無資料,請重新搜尋..",-1)),St=[wt],Rt={__name:"index",setup(t){const u=ye(),f=Me(),S=$e(),{path:h}=xe(S),ae=ge();h.value=ae.name;const A=d(),H=x(()=>A.value?Object.entries(A.value["Time Series (1min)"]).map(([e,n])=>({date:e,...n})):void 0),D=d("AAPL"),K=d(),_=d(),E=d([]),F=x(()=>E.value.join(",")),re=d({blockchain:"區塊鏈",earnings:"收益",ipo:"IPO",mergers_and_acquisitions:"併購",financial_markets:"金融市場",economy_fiscal:"財政政策（稅改、政府支出）",economy_monetary:"貨幣政策（利率、通貨膨脹）",economy_macro:"總體經濟",energy_transportation:"能源與運輸",finance:"金融",life_sciences:"生命科學",manufacturing:"製造業",real_estate:"房地產",retail_wholesale:"零售批發",technology:"科技"}),R=d(""),b=d(""),v=d(""),W=x(()=>(b.value=b.value?f(b.value).minute(0).hour(0).format("YYYYMMDD[T]HHmm"):"",b.value)),Q=x(()=>(v.value=v.value?f(v.value).minute(59).hour(23).format("YYYYMMDD[T]HHmm"):"",v.value));ke(()=>{_.value&&_.value.forEach(e=>{e.authors.reverse()})});const P=d([]),le=async(e="AAPL",n="Apple Inc.")=>{var i;D.value=e;const[g,q,G,O,s,c]=await Promise.all([Ve(),te(D.value),Ue(),je(),ze(),oe(F.value,R.value,W.value,Q.value)]);K.value=g,A.value=q,T.value=n,P.value=[G.slice(0,5),O.slice(0,5),s.slice(0,5)],_.value=((i=c.feed)==null?void 0:i.slice(0,20))||[]};we(()=>{le()});const ce=async(e,n)=>{D.value=e;const g=await te(D.value);A.value=g,T.value=n},y=x(()=>{if(H.value)return H.value.reverse().map(e=>[+f(e.date),parseFloat(e["2. high"])])}),Y=x(()=>y.value[0][1]>y.value[y.value.length-1][1]),T=d(""),ie=x(()=>({title:{useHTML:!0,text:`<span class='text-[21px]'>${T.value}</span>`},xAxis:{gapGridLineWidth:0},yAxis:{gridLineColor:"#ffffff"},navigator:{enabled:!1},rangeSelector:{buttonTheme:{fill:"none",stroke:"none",r:3,width:50,height:30,style:{color:"#284a6b",fontWeight:"bold",lineWidth:5,fontSize:"16px"},states:{hover:{},select:{fill:"#284a6b",style:{color:"white"}}}},buttons:[{type:"minute",count:5,text:"5分"},{type:"hour",count:1,text:"1小時"},{type:"day",count:1,text:"1天"},{type:"week",count:1,text:"1週"},{type:"all",count:1,text:"全部"}],buttonPosition:{align:"left",x:-15,y:-45},labelStyle:{color:"white"},selected:2,inputEnabled:!1},accessibility:{enabled:!1},stockTools:{gui:{enabled:!1}},series:[{name:`${T.value}`,type:"area",data:y.value,color:Y.value?"#ff0000":"#56a556",lineWidth:2,gapSize:5,tooltip:{valueDecimals:2},showInLegend:!0,fillColor:{linearGradient:{x1:0,y1:0,x2:0,y2:1},stops:[[0,Y.value?"#ff000044":"#56a55644"],[1,Te.color(Y.value?"#ff0000":"#56a556").setOpacity(0).get("rgba")]]},threshold:null}]})),ue=e=>{if(e===0)return"當日上漲股票排名";if(e===1)return"當日下跌股票排名";if(e===2)return"當日活躍股票排名"},de=e=>{if(e===0)return"";if(e===1)return"bg-[#ff0000]";if(e===2)return"bg-zinc-700"},J=async()=>{var n;const e=await oe(F.value,R.value,W.value,Q.value);(n=e.feed)!=null&&n.length?_.value=e.feed.slice(0,20):_.value=void 0},pe=e=>e=="AAPL"?"bg-black p-3 rounded-[50%]":"",me=e=>e>0?"text-[#56a556]":"text-[#ff0000]",X=e=>e>0?`+${U(e)}`:`${U(e)}`,fe=e=>e||"~/assets/img/FTNT.png";return Ie(y),(e,n)=>{const g=_e,q=Se("highcharts"),G=be,O=Ce;return r(),Z(O,{name:"header"},Re({_:2},[a(y)?{name:"main",fn:C(()=>[o("article",null,[o("section",He,[(r(!0),l(w,null,k(a(K),s=>(r(),l("button",{class:"flex items-center btn-primary shadows sticky w-[24%]",onClick:c=>ce(s.symbol,s.name)},[o("img",{src:`https://financialmodelingprep.com/image-stock/${s.symbol.toUpperCase()}.png`,class:N(["inline-block w-[15%] h-[45px] aspect-square me-3",pe(s.symbol)])},null,10,Fe),o("div",null,[V(g,{to:`/stocks/${s.symbol}`,class:"text-[24px] font-bold hover:text-[#4279af]",onClick:Ae(c=>a(u).push(`/stocks/${s.symbol}`),["self"])},{default:C(()=>[j(p(s.name),1)]),_:2},1032,["to","onClick"]),o("div",We,[o("p",Qe,[j(p(s.price),1),Je]),o("p",{class:N(["ms-3",me(s.changesPercentage)])},p(X(s.changesPercentage))+"% ",3)])])],8,Ke))),256))]),V(G,null,{default:C(()=>[a(y)?(r(),Z(q,{key:0,class:"h-[600px] w-[90%] mx-auto my-10","constructor-type":"stockChart",options:a(ie)},null,8,["options"])):ee("",!0)]),_:1})]),a(P)?(r(!0),l(w,{key:0},k(a(P),(s,c)=>(r(),l("article",Xe,[o("h3",Ze,p(ue(c)),1),o("ul",et,[(r(!0),l(w,null,k(s,i=>(r(),l("li",{key:i.name,class:"racebox"},[o("figure",tt,[o("img",{src:`https://financialmodelingprep.com/image-stock/${i.symbol}.png`,class:N(["inline-block w-[35px] h-[35px] aspect-square me-3",i.name=="AAPL"?"bg-black p-1 rounded-[50%]":""]),onError:n[0]||(n[0]=(...he)=>("onError"in e?e.onError:a(I))&&("onError"in e?e.onError:a(I))(...he))},null,42,ot),V(g,{to:`/stocks/${i.symbol}`,class:"hover:text-[#4279af]"},{default:C(()=>[o("h4",st,p(i.name),1),o("p",null,p(i.symbol),1)]),_:2},1032,["to"])]),o("div",nt,[o("p",at,[j(p(`${("twoAfterDecimal"in e?e.twoAfterDecimal:a(U))(i.price)}`),1),rt]),o("p",{class:N(["percent text-center",de(c)])},p(X(i.changesPercentage))+"% ",3)])]))),128))])]))),256)):ee("",!0),o("article",lt,[o("aside",ct,[it,L(o("input",{id:"news",type:"text",placeholder:"格式(代號 代號)",class:"w-[100%] mb-4 mt-1 p-1 bg-white border border-solid border-black rounded shadow :active:border-white text-[14px]","onUpdate:modelValue":n[1]||(n[1]=s=>M(R)?R.value=s:null),onKeydown:De(J,["native","enter"])},null,40,ut),[[z,a(R)]]),o("div",null,[dt,pt,L(o("input",{type:"date",id:"start","onUpdate:modelValue":n[2]||(n[2]=s=>M(b)?b.value=s:null),class:"text-[14px] w-[100%] mb-4 mt-1 p-1 bg-white border border-solid border-black rounded shadow"},null,512),[[z,a(b)]]),mt,L(o("input",{type:"date",id:"end","onUpdate:modelValue":n[3]||(n[3]=s=>M(v)?v.value=s:null),class:"text-[14px] w-[100%] mb-4 mt-1 p-1 bg-white border border-solid border-black rounded shadow"},null,512),[[z,a(v)]])]),ft,(r(!0),l(w,null,k(a(re),(s,c)=>(r(),l("div",{key:c,class:"mt-1"},[L(o("input",{type:"checkbox",value:c,"onUpdate:modelValue":n[4]||(n[4]=i=>M(E)?E.value=i:null)},null,8,ht),[[Ee,a(E)]]),o("label",_t,p(s),1)]))),128)),o("button",{onClick:J,class:"bg-[#4f46e5] py-1 px-2 mt-3 rounded text-white font-bold"}," 新聞篩選 ")]),a(_)!==void 0?(r(),l("section",bt,[(r(!0),l(w,null,k(a(_),s=>(r(),l("a",{href:s.url,key:s.overall_sentiment_score,class:"news"},[o("img",{src:fe(s.banner_image),loading:"lazy",class:"w-[30%] aspect-square object-contain me-3",alt:"",onError:n[5]||(n[5]=(...c)=>("onError"in e?e.onError:a(I))&&("onError"in e?e.onError:a(I))(...c))},null,40,yt),o("div",null,[o("h3",xt,p(s.title),1),(r(!0),l(w,null,k(s.authors,c=>(r(),l("p",gt,p(c),1))),256))])],8,vt))),128))])):(r(),l("div",kt,St))])]),key:"0"}:void 0]),1024)}}},It=ve(Rt,[["__scopeId","data-v-d01e9d26"]]);export{It as default};
