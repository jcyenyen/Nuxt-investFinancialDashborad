import{_ as D}from"./client-only.22e0b137.js";import{_ as M,s as L,u as $,r as m,n as s,q as B,f as E,v as N,o as g,x,w as y,a as V,b as q,y as v,z as I,A as w,B as W}from"./entry.409042ab.js";import{t as F}from"./twoAfterDecimal.45cad18c.js";import{p as P}from"./progressDone.e7b25077.js";import{u as H}from"./stock.5dd2332e.js";const R={class:"mx-auto"},j={__name:"hotMap",setup(G){const _=H(),{path:b}=L(_),A=$();b.value=A.name;const u="3ec51f1b30948ec05697da301727451c",z=`https://financialmodelingprep.com/api/v3/stock-screener?marketCapMoreThan=10000000000&volumeMoreThan=50000&sector=Technology&dividendMoreThan=0&betaLowerThan=1.5&limit=500&apikey=${u}`,k=["Consumer Electronics","Software—Infrastructure","Semiconductors","Semiconductor Equipment & Materials","Communication Equipment","Software—Application","Information Technology Services","Solar","Scientific & Technical Instruments","Computer Hardware","Electronic Components"],i=m(),S=e=>{const t=i.value?i.value.filter(n=>n.industry===e):[];return t.length=t.length<=10?t.length:10,t},l=s(()=>{let e=[];return k.forEach(t=>{e.push(...S(t))}),e=e.length?e:[],e}),C=async()=>{const e=await w.get(z);i.value=e.data},d=s(()=>l.value.length!==0?l.value.map(t=>t.symbol).join(","):void 0);B(()=>{C()});const T=s(()=>`https://financialmodelingprep.com/api/v3/quote/${d.value}?apikey=${u}`),c=m([]),o=s(()=>c.value.length!==0?c.value.map(t=>{let n=l.value.find(r=>r.symbol===t.symbol);return n&&(t.sector=n.sector,t.industry=n.industry),t}):void 0),f=s(()=>{const e=o.value?o.value.map(a=>({id:a.name,name:`<h3 style="font-size:48px;">${a.symbol}</h3><h4 style="font-size:24px;text-align:center;">${F(a.changesPercentage)} %</h4>`,colorValue:a.changesPercentage,parent:a.industry,value:a.volume})):void 0,t=o.value?new Set(o.value.map(a=>a.industry)):void 0,n=o.value?new Set(o.value.map(a=>a.sector)):void 0,r=n?[...n].map(a=>({id:a,name:a,color:"transparent"})):void 0,h=t?[...t].map(a=>({id:a,name:`<div style="background-color: #000000;width:100px;word-break: break-all;overflow-wrap: break-word;textOverflow: ellipsis;"><h3>${a}</h3></div>`,parent:"Technology",color:"transparent"})):void 0;return e?[...r,...h,...e]:void 0});E(async()=>{if(d.value){const e=await w.get(T.value);c.value=e.data}});const p=s(()=>f.value?{accessibility:{enabled:!1},chart:{height:"55%",width:"1400"},colorAxis:{max:3,min:-3,stops:[[0,"#F63538"],[.16,"#bf4045"],[.33,"#8b444e"],[.5,"#414554"],[.66,"#35764e"],[.82,"#2f9e4f"],[1,"#30cc5a"]]},stockTools:{gui:{enabled:!1}},plotOptions:{treemap:{states:{hover:{enabled:!1,brightness:0,borderColor:"transparent"}}}},series:[{name:"Tech",type:"treemap",layoutAlgorithm:"squarified",allowDrillToNode:!0,animationLimit:1e3,levels:[{level:1,dataLabels:{enabled:!1,align:"left",verticalAlign:"top",fontSize:"14px",textOutline:!1,borderWidth:5,backgroundColor:"black",style:{fontSize:"12px",textOutline:!1,color:"white",textOverflow:"pre-wrap",whiteSpace:"nowrap",width:"100%",textOverflow:"ellipsis"},width:"100%"},color:"transparent",borderWidth:8,borderColor:"#363a46",levelIsConstant:!0,tooltip:{enabled:!1}},{level:2,dataLabels:{align:"left",verticalAlign:"top",enabled:!0,style:{fontSize:"12px",textOutline:!1,color:"white",textOverflow:"pre-wrap"}},color:"transparent",borderWidth:5,borderColor:"#363a46"},{level:3,dataLabels:{useHTML:!0,formatter:function(){return this.point.shapeArgs.width/this.point.shapeArgs.height>20||this.point.shapeArgs.height/this.point.shapeArgs.width>20?null:this.point.shapeArgs.width*this.point.shapeArgs.height>2e5?this.point.name:this.point.shapeArgs.width*this.point.shapeArgs.height>4e4?this.point.name.replace('<h3 style="font-size:48px;">','<h3 style="font-size:36px;">').replace('<h4 style="font-size:24px;text-align:center;">','<h4 style="font-size:18px;text-align:center;">'):this.point.shapeArgs.width*this.point.shapeArgs.height>15e3?this.point.name.replace('<h3 style="font-size:48px;">','<h3 style="font-size:24px;">').replace('<h4 style="font-size:24px;text-align:center;">','<h4 style="font-size:12px;text-align:center;">'):this.point.shapeArgs.width*this.point.shapeArgs.height>7500?this.point.name.replace('<h3 style="font-size:48px;">','<h3 style="font-size:16px;">').replace('<h4 style="font-size:24px;text-align:center;">','<h4 style="font-size:12px;text-align:center;">'):this.point.shapeArgs.width*this.point.shapeArgs.height>4e3?this.point.name.replace('<h3 style="font-size:48px;">','<h3 style="font-size:12px;">').replace('<h4 style="font-size:24px;text-align:center;">','<h4 style="font-size:8px;text-align:center;display:none;">'):null},enabled:!0,align:"center",verticalAlign:"middle",style:{fontSize:"12px",textOutline:!1,color:"white",textOverflow:"pre-wrap"}},borderWidth:1,borderColor:"#363a46",color:"transparent"}],accessibility:{exposeAsGroupOnly:!1},data:f.value}],subtitle:{text:"Technology",align:"left"},title:{text:"股票熱區地圖",align:"left"},tooltip:{enabled:!1}}:void 0);return P(p),(e,t)=>{const n=N("highcharts"),r=D,h=W;return g(),x(h,{name:"header"},{main:y(()=>[V("div",R,[q(r,null,{default:y(()=>[v(p)?(g(),x(n,{key:0,class:"w-[92%] mx-auto my-10","constructor-type":"chart",options:v(p)},null,8,["options"])):I("",!0)]),_:1})])]),_:1})}}},Z=M(j,[["__scopeId","data-v-14d3fa70"]]);export{Z as default};
