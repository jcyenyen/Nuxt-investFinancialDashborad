import{_ as O}from"./client-only.08977553.js";import{_ as M,s as B,u as D,r as m,n as a,q as L,f as $,v as N,o as g,x,w as y,a as V,b as q,y as v,z as E,A as w,B as I}from"./entry.ed2d6962.js";import{t as W}from"./twoAfterDecimal.45cad18c.js";import{p as P}from"./progressDone.7059aff8.js";import{u as H}from"./navBar.3d8d6c73.js";const R={class:"mx-auto"},j={__name:"hotMap",setup(F){const _=H(),{path:b}=B(_),A=D();b.value=A.name;const u="3ec51f1b30948ec05697da301727451c",S=`https://financialmodelingprep.com/api/v3/stock-screener?marketCapMoreThan=10000000000&volumeMoreThan=50000&sector=Technology&dividendMoreThan=0&betaLowerThan=1.5&limit=500&apikey=${u}`,z=["Consumer Electronics","Software—Infrastructure","Semiconductors","Semiconductor Equipment & Materials","Communication Equipment","Software—Application","Information Technology Services","Solar","Scientific & Technical Instruments","Computer Hardware","Electronic Components"],r=m(),k=e=>r.value?r.value.filter(n=>n.industry===e).slice(0,10):[],i=a(()=>z.reduce((e,n)=>e.concat(k(n)),[])),d=a(()=>i.value.length!==0?i.value.map(n=>n.symbol).join(","):void 0),C=async()=>{const e=await w.get(S);r.value=e.data};L(()=>{C()});const T=a(()=>`https://financialmodelingprep.com/api/v3/quote/${d.value}?apikey=${u}`),l=m([]),o=a(()=>{if(l.value.length)return l.value.map(e=>{const n=i.value.find(s=>s.symbol===e.symbol);return n&&(e.sector=n.sector,e.industry=n.industry),e})}),f=a(()=>{if(!o.value)return;const e=o.value.map(t=>({id:t.name,name:`<h3 style="font-size:48px;">${t.symbol}</h3><h4 style="font-size:24px;text-align:center;">${W(t.changesPercentage)} %</h4>`,colorValue:t.changesPercentage,parent:t.industry,value:t.volume})),n=new Set(o.value.map(t=>t.industry)),p=[...new Set(o.value.map(t=>t.sector))].map(t=>({id:t,name:t,color:"transparent"})),h=[...n].map(t=>({id:t,name:`<div style="background-color: #000000;width:100px;word-break: break-all;overflow-wrap: break-word;textOverflow: ellipsis;"><h3>${t}</h3></div>`,parent:"Technology",color:"transparent"}));return[...p,...h,...e]});$(async()=>{if(d.value){const e=await w.get(T.value);l.value=e.data}});const c=a(()=>f.value?{accessibility:{enabled:!1},chart:{height:"65%",width:"1400"},colorAxis:{max:3,min:-3,stops:[[0,"#F63538"],[.16,"#bf4045"],[.33,"#8b444e"],[.5,"#414554"],[.66,"#35764e"],[.82,"#2f9e4f"],[1,"#30cc5a"]]},stockTools:{gui:{enabled:!1}},plotOptions:{treemap:{states:{hover:{enabled:!1,brightness:0,borderColor:"transparent"}}}},series:[{name:"Tech",type:"treemap",layoutAlgorithm:"squarified",allowDrillToNode:!0,animationLimit:1e3,levels:[{level:1,dataLabels:{enabled:!1,align:"left",verticalAlign:"top",fontSize:"14px",textOutline:!1,borderWidth:5,backgroundColor:"black",style:{fontSize:"12px",textOutline:!1,color:"white",textOverflow:"pre-wrap",whiteSpace:"nowrap",width:"100%",textOverflow:"ellipsis"},width:"100%"},color:"transparent",borderWidth:8,borderColor:"#363a46",levelIsConstant:!0,tooltip:{enabled:!1}},{level:2,dataLabels:{align:"left",verticalAlign:"top",enabled:!0,style:{fontSize:"12px",textOutline:!1,color:"white",textOverflow:"pre-wrap"}},color:"transparent",borderWidth:5,borderColor:"#363a46"},{level:3,dataLabels:{useHTML:!0,formatter:function(){return this.point.shapeArgs.width/this.point.shapeArgs.height>20||this.point.shapeArgs.height/this.point.shapeArgs.width>20||this.point.shapeArgs.width<40||this.point.shapeArgs.height<35?null:this.point.shapeArgs.width*this.point.shapeArgs.height>2e5?this.point.name:this.point.shapeArgs.width*this.point.shapeArgs.height>4e4?this.point.name.replace('<h3 style="font-size:48px;">','<h3 style="font-size:36px;text-align:center;">').replace('<h4 style="font-size:24px;text-align:center;">','<h4 style="font-size:18px;text-align:center;">'):this.point.shapeArgs.width*this.point.shapeArgs.height>15e3?this.point.name.replace('<h3 style="font-size:48px;">','<h3 style="font-size:24px;text-align:center;">').replace('<h4 style="font-size:24px;text-align:center;">','<h4 style="font-size:12px;text-align:center;">'):this.point.shapeArgs.width*this.point.shapeArgs.height>7500?this.point.name.replace('<h3 style="font-size:48px;">','<h3 style="font-size:16px;text-align:center;">').replace('<h4 style="font-size:24px;text-align:center;">','<h4 style="font-size:12px;text-align:center;">'):this.point.shapeArgs.width*this.point.shapeArgs.height>4e3?this.point.name.replace('<h3 style="font-size:48px;">','<h3 style="font-size:12px;text-align:center;">').replace('<h4 style="font-size:24px;text-align:center;">','<h4 style="font-size:8px;text-align:center;display:none;">'):null},enabled:!0,align:"center",verticalAlign:"middle",style:{fontSize:"12px",textOutline:!1,color:"white",textOverflow:"pre-wrap"}},borderWidth:1,borderColor:"#363a46",color:"transparent"}],accessibility:{exposeAsGroupOnly:!1},data:f.value}],subtitle:{text:"Technology",align:"left"},title:{text:"股票熱區地圖",align:"left"},tooltip:{enabled:!1}}:void 0);return P(c),(e,n)=>{const s=N("highcharts"),p=O,h=I;return g(),x(h,{name:"header"},{main:y(()=>[V("article",R,[q(p,null,{default:y(()=>[v(c)?(g(),x(s,{key:0,class:"w-[92%] mx-auto my-10","constructor-type":"chart",options:v(c)},null,8,["options"])):E("",!0)]),_:1})])]),_:1})}}},X=M(j,[["__scopeId","data-v-84e78e65"]]);export{X as default};
